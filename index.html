<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="images/jpg" href="icon.jpg">
<title>PhotoCuts - PhotoBooth</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
* {margin:0;padding:0;box-sizing:border-box;}
body {font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:#333;overflow-x:hidden;}
.navbar {background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);padding:1rem 0;position:fixed;top:0;left:0;right:0;z-index:1000;box-shadow:0 2px 20px rgba(0,0,0,0.1);}
.nav-container {max-width:1200px;margin:0 auto;padding:0 2rem;display:flex;justify-content:space-between;align-items:center;}
.logo {font-size:1.8rem;font-weight:bold;color:#667eea;text-decoration:none;}
.nav-links {display:flex;list-style:none;gap:2rem;align-items:center;}
.nav-links a {text-decoration:none;color:#333;font-weight:500;transition:color 0.3s ease;}
.nav-links a:hover {color:#667eea;}
.social-icon {font-size:1.2rem;color:#667eea;transition:transform 0.3s ease;}
.social-icon:hover {transform:scale(1.2);color:#764ba2;}
.main-content {margin-top:80px;padding:2rem;}
.page {display:none;max-width:1200px;margin:0 auto;}
.page.active {display:block;}
.hero {text-align:center;margin-bottom:3rem;}
.hero h1 {font-size:3rem;color:white;margin-bottom:1rem;text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
.hero p {font-size:1.2rem;color:rgba(255,255,255,0.9);margin-bottom:2rem;}
.photobooth-container {background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);border-radius:20px;padding:2rem;box-shadow:0 20px 40px rgba(0,0,0,0.1);margin-bottom:2rem;}
.controls-section {display:flex;justify-content:center;align-items:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;}
.template-selector {display:flex;align-items:center;gap:0.5rem;}
select {padding:0.8rem 1rem;border:2px solid #e0e0e0;border-radius:12px;font-size:1rem;background:white;transition:border-color 0.3s ease;}
select:focus {outline:none;border-color:#667eea;}
.mirror-option {display:flex;align-items:center;gap:0.5rem;font-weight:500;}
.camera-section {display:flex;justify-content:center;align-items:flex-start;gap:2rem;margin-bottom:2rem;flex-wrap:wrap;flex-direction:row-reverse;}
.video-container {position:relative;}
#video {width:400px;max-width:90vw;height:300px;object-fit:cover;border-radius:20px;border:4px solid #667eea;transform:scaleX(-1);box-shadow:0 10px 30px rgba(0,0,0,0.2);}
.live-strip {display:flex;flex-direction:column;gap:1rem;max-height:400px;overflow-y:auto;padding:0.5rem;background:rgba(0,0,0,0.05);border-radius:15px;min-width:120px;}
.live-strip img {width:100px;height:auto;border-radius:10px;border:2px solid #667eea;transition:transform 0.3s ease;}
.live-strip img:hover {transform:scale(1.05);}
.action-buttons {display:flex;justify-content:center;gap:1rem;margin-bottom:2rem;flex-wrap:wrap;}
.btn {padding:1rem 2rem;border:none;border-radius:50px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;gap:0.5rem;text-decoration:none;color:white;}
.btn-primary {background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);box-shadow:0 10px 20px rgba(102,126,234,0.3);}
.btn-primary:hover {transform:translateY(-2px);box-shadow:0 15px 30px rgba(102,126,234,0.4);}
.btn-success {background:linear-gradient(135deg,#4CAF50 0%,#45a049 100%);box-shadow:0 10px 20px rgba(76,175,80,0.3);}
.btn-success:hover {transform:translateY(-2px);box-shadow:0 15px 30px rgba(76,175,80,0.4);}
.btn-warning {background:linear-gradient(135deg,#ff9800 0%,#f57c00 100%);box-shadow:0 10px 20px rgba(255,152,0,0.3);}
.btn-warning:hover {transform:translateY(-2px);box-shadow:0 15px 30px rgba(255,152,0,0.4);}
.btn:disabled {opacity:0.5;cursor:not-allowed;transform:none;}
.status {text-align:center;font-size:1.1rem;font-weight:500;color:#667eea;margin-bottom:2rem;padding:1rem;background:rgba(102,126,234,0.1);border-radius:10px;}
#stripCanvas {display:block;margin:0 auto;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);background:white;max-width:100%;height:auto;}
.countdown {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:4rem;font-weight:bold;color:#ff4444;text-shadow:2px 2px 4px rgba(0,0,0,0.5);z-index:10;background:rgba(255,255,255,0.9);border-radius:50%;width:100px;height:100px;display:flex;align-items:center;justify-content:center;display:none;}
</style>
</head>
<body>
<!-- Navigation -->
<nav class="navbar">
<div class="nav-container">
<a href="#" class="logo" onclick="showPage('home')"><i class="fas fa-camera"></i> PhotoCuts</a>
<ul class="nav-links">
<li><a href="#" onclick="showPage('home')">Home</a></li>
<li><a href="#" onclick="showPage('about')">About</a></li>
<li><a href="#" onclick="showPage('contact')">Contact</a></li>
<li><a href="https://www.instagram.com/devz.ed/" target="_blank" class="social-icon"><i class="fab fa-instagram"></i></a></li>
</ul>
</div>
</nav>

<div class="main-content">
<div id="home" class="page active">
<div class="hero">
<h1><i class="fas fa-camera-retro"></i> PhotoCuts Studio</h1>
<p>Capture your favorite memories! Create fun photo strips with templates and live GIF animations!</p>
</div>

<div class="photobooth-container">
<div class="controls-section">
<div class="template-selector">
<label for="templateSelect"><strong>Choose Template:</strong></label>
<select id="templateSelect">
<option value="template1">Classic Strip</option>
<option value="template2">Modern Frame</option>
<option value="template3">Vintage Style</option>
</select>
</div>
<label class="mirror-option"><input type="checkbox" id="mirrorSave" checked><strong>Mirror final images</strong></label>
</div>

<div class="camera-section">
<div class="video-container">
<video id="video" autoplay playsinline muted></video>
<div id="countdown" class="countdown"></div>
</div>
<div id="liveStrip" class="live-strip"></div>
</div>

<div class="action-buttons">
<button id="startBtn" class="btn btn-primary"><i class="fas fa-play"></i> Start Photo Session (4 shots)</button>
<button id="pngBtn" class="btn btn-success" disabled><i class="fas fa-download"></i> Download PNG</button>
<button id="gifBtn" class="btn btn-warning" disabled><i class="fas fa-download"></i> Download Live GIF</button>
</div>

<div id="status" class="status"><i class="fas fa-info-circle"></i> Initializing camera and templates...</div>
<canvas id="stripCanvas" width="400" height="1200"></canvas>
</div>
</div>

<div id="about" class="page">
<div class="about-content">
<h2><i class="fas fa-info-circle"></i> About PhotoCuts</h2>
<p>Hi! ðŸ‘‹ Iâ€™m a student practicing web development and coding. 
      This project, <strong>PhotoCuts</strong>, is a simple web-based photo booth 
      application I created to learn HTML, CSS, and JavaScript. 
      It uses camera access to capture photos, create photo strips, and even generate animated GIFs.</p>
</div>
</div>

<div id="contact" class="page">
<div class="contact-content">
<h2><i class="fas fa-envelope"></i> Get in Touch</h2>
<p>Feel free to try it out, and leave feedback via my Instagram! ðŸ“¸</p>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/gif.js.optimized/dist/gif.js"></script>
<script>
// Page navigation
function showPage(pageId){
document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
document.getElementById(pageId).classList.add('active');
}

// Photobooth
(async()=>{
const video=document.getElementById('video');
const templateSelect=document.getElementById('templateSelect');
const mirrorSave=document.getElementById('mirrorSave');
const startBtn=document.getElementById('startBtn');
const pngBtn=document.getElementById('pngBtn');
const gifBtn=document.getElementById('gifBtn');
const status=document.getElementById('status');
const canvas=document.getElementById('stripCanvas');
const ctx=canvas.getContext('2d');
const countdown=document.getElementById('countdown');

const SHOTS=4;
const SLOT_RATIOS=[{x:0.05,y:0.05,w:0.9,h:0.2},{x:0.05,y:0.28,w:0.9,h:0.2},{x:0.05,y:0.51,w:0.9,h:0.2},{x:0.05,y:0.74,w:0.9,h:0.2}];
let templateImg=new Image();
let templateLoaded=false;
let videoReady=false;
let stream;

function updateStatus(txt){status.innerHTML=`<i class="fas fa-info-circle"></i> ${txt}`;}

function createDefaultTemplate(){
const tempCanvas=document.createElement('canvas');
tempCanvas.width=400; tempCanvas.height=1200;
const tctx=tempCanvas.getContext('2d');
const gradient=tctx.createLinearGradient(0,0,0,1200);
gradient.addColorStop(0,'#667eea'); gradient.addColorStop(1,'#764ba2');
tctx.fillStyle=gradient; tctx.fillRect(0,0,400,1200);
tctx.fillStyle='rgba(255,255,255,0.9)';
SLOT_RATIOS.forEach(slot=>{
const x=slot.x*400,y=slot.y*1200,w=slot.w*400,h=slot.h*1200;
tctx.fillRect(x,y,w,h); tctx.strokeStyle='#333'; tctx.lineWidth=2; tctx.strokeRect(x,y,w,h);
});
tctx.fillStyle='white'; tctx.font='bold 24px Arial'; tctx.textAlign='center';
tctx.fillText('PhotoCuts Studio',200,30);
return tempCanvas;
}

function loadTemplate(){const defaultTemplate=createDefaultTemplate();templateImg=new Image();
templateImg.onload=()=>{
templateLoaded=true;
canvas.width=templateImg.naturalWidth||400;
canvas.height=templateImg.naturalHeight||1200;
redrawEmptyTemplate();updateStatus('Template loaded. Camera ready!');checkReady();
};
templateImg.src=defaultTemplate.toDataURL();
}

function redrawEmptyTemplate(){if(!templateLoaded){const gradient=ctx.createLinearGradient(0,0,0,canvas.height);gradient.addColorStop(0,'#667eea');gradient.addColorStop(1,'#764ba2');ctx.fillStyle=gradient;ctx.fillRect(0,0,canvas.width,canvas.height);return;}
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.drawImage(templateImg,0,0,canvas.width,canvas.height);
}

function redrawWithCaptures(captures){redrawEmptyTemplate();captures.forEach((img,i)=>{if(!img)return;const r=SLOT_RATIOS[i];ctx.drawImage(img,r.x*canvas.width,r.y*canvas.height,r.w*canvas.width,r.h*canvas.height);});}

function waitVideoReady(){return new Promise(resolve=>{if(video.videoWidth&&video.videoHeight)return resolve();function onMeta(){video.removeEventListener('loadedmetadata',onMeta);resolve();}video.addEventListener('loadedmetadata',onMeta);});}

async function startCamera(){try{stream=await navigator.mediaDevices.getUserMedia({video:{facingMode:'user'},audio:false});video.srcObject=stream;await waitVideoReady();videoReady=true;updateStatus('Camera ready! Choose a template and start shooting.');checkReady();}catch(err){console.error(err);updateStatus('Camera error: Please allow camera access and refresh the page.');}}

function checkReady(){startBtn.disabled=!(templateLoaded&&videoReady);}

function captureFrame(mirror){const vw=video.videoWidth,vh=video.videoHeight;const tmp=document.createElement('canvas');tmp.width=vw;tmp.height=vh;const tctx=tmp.getContext('2d');if(mirror){tctx.translate(vw,0);tctx.scale(-1,1);tctx.drawImage(video,0,0,vw,vh);}else{tctx.drawImage(video,0,0,vw,vh);}
const img=new Image(); img.src=tmp.toDataURL('image/png'); return img;
}

function addToLiveStrip(img){const strip=document.getElementById('liveStrip');const thumb=document.createElement('img');thumb.src=img.src;strip.appendChild(thumb);strip.scrollTop=strip.scrollHeight;}

function showCountdown(count){countdown.style.display='flex';countdown.textContent=count;setTimeout(()=>{countdown.style.display='none';},900);}

async function runPhotobooth(){startBtn.disabled=true;pngBtn.disabled=true;gifBtn.disabled=true;updateStatus('Get ready for your photo session!');const captures=new Array(SHOTS).fill(null);document.getElementById('liveStrip').innerHTML='';

for(let i=0;i<SHOTS;i++){
updateStatus(`Photo ${i+1} of ${SHOTS} - Get ready!`);
for(let c=3;c>=1;c--){showCountdown(c);await new Promise(r=>setTimeout(r,1000));}
showCountdown('ðŸ“¸');updateStatus(`Photo ${i+1} - Say cheese!`);await new Promise(r=>setTimeout(r,200));
const img=captureFrame(mirrorSave.checked);await new Promise(resolve=>{img.onload=resolve;});
captures[i]=img;redrawWithCaptures(captures);addToLiveStrip(img);
if(i<SHOTS-1){await new Promise(r=>setTimeout(r,1500));}
}
window.__LATEST_CAPTURES=captures;
updateStatus('ðŸŽ‰ Photo session complete! Download your photos below.');
pngBtn.disabled=false; gifBtn.disabled=false; startBtn.disabled=false;
}

function buildFinalCanvas(captures){const out=document.createElement('canvas');out.width=canvas.width;out.height=canvas.height;const octx=out.getContext('2d');
if(templateLoaded){octx.drawImage(templateImg,0,0,out.width,out.height);}else{const gradient=octx.createLinearGradient(0,0,0,out.height);gradient.addColorStop(0,'#667eea');gradient.addColorStop(1,'#764ba2');octx.fillStyle=gradient;octx.fillRect(0,0,out.width,out.height);}
captures.forEach((img,i)=>{if(!img)return;const r=SLOT_RATIOS[i];octx.drawImage(img,r.x*out.width,r.y*out.height,r.w*out.width,r.h*out.height);});return out;
}

function downloadPNG(){const captures=window.__LATEST_CAPTURES||[];const count=captures.filter(Boolean).length;if(count<SHOTS){alert('Please complete the photo session first!');return;}
const final=buildFinalCanvas(captures);const url=final.toDataURL('image/png');const a=document.createElement('a');a.href=url;a.download=`photocuts-strip-${Date.now()}.png`;document.body.appendChild(a);a.click();document.body.removeChild(a);updateStatus('âœ… PNG downloaded successfully!');}

function downloadGIF(){const captures=window.__LATEST_CAPTURES||[];const count=captures.filter(Boolean).length;if(count<SHOTS){alert('Please complete the photo session first!');return;}
updateStatus('ðŸŽ¬ Creating animated GIF... Please wait.');gifBtn.disabled=true;const gif=new GIF({workers:2,quality:10,width:canvas.width,height:canvas.height});
for(let k=0;k<SHOTS;k++){const fcanvas=document.createElement('canvas');fcanvas.width=canvas.width;fcanvas.height=canvas.height;const fctx=fcanvas.getContext('2d');
if(templateLoaded){fctx.drawImage(templateImg,0,0,fcanvas.width,fcanvas.height);}else{const gradient=fctx.createLinearGradient(0,0,0,fcanvas.height);gradient.addColorStop(0,'#667eea');gradient.addColorStop(1,'#764ba2');fctx.fillStyle=gradient;fctx.fillRect(0,0,fcanvas.width,fcanvas.height);}
fctx.drawImage(captures[k],SLOT_RATIOS[k].x*fcanvas.width,SLOT_RATIOS[k].y*fcanvas.height,SLOT_RATIOS[k].w*fcanvas.width,SLOT_RATIOS[k].h*fcanvas.height);
gif.addFrame(fcanvas,{delay:800,copy:true});}
gif.on('finished',function(blob){const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`photocuts-strip-${Date.now()}.gif`;document.body.appendChild(a);a.click();document.body.removeChild(a);updateStatus('âœ… GIF downloaded successfully!');gifBtn.disabled=false;});gif.render();
}

startBtn.addEventListener('click',runPhotobooth);
pngBtn.addEventListener('click',downloadPNG);
gifBtn.addEventListener('click',downloadGIF);

loadTemplate(); startCamera();
})();
</script>
</body>
</html>
